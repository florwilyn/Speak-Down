{% extends 'base.html' %}
<!-- {% load static %}
<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
	<title>Home</title>
</head>
<body>
<div class="container" style="padding: 20px"> -->
{% block content %}
	<h3 style="text-align: center;"><b>Hello, {{request.user.username}}</b></h3>
	<h4 style="text-align: center; margin-top: 0px">You have {{ forum|length }} submissions to be reviewed.</h4>
	<ul>
		{% for forum in forum %}
		<li style="list-style-type:none;" style="text-align: center;">
			<form method="POST" action="{% url 'approve' %}" name ="post_form" id ="post_form">
			{% csrf_token %}
			<div class="panel panel-default" style="margin: 0 auto; display: block; width: 50%; margin-bottom: 10px">
			<div class="title" style="margin-top: 10px">
				<span style="margin: 10px"><b>#{{forum.title}}</b></span>
				<!-- <a data-toggle="collapse" href="#collapse1"><b>#{{forum.title}}</b></a> -->
			</div>
			  <div class="panel-body">
			  {% if forum.image %}
				  		<img src="{{forum.image.url}}" alt="" class="img-responsive center-block" />
				  	{% endif %}
			    {{forum.content}}
			    <br><br>
			    <small style="vertical-align: bottom;">
			    by {{forum.user}} - {{forum.date}}
			    </small>
			  </div>
			  <div class="panel-footer">
				    <input type="hidden" name="requests_id" value="{{forum.id}}">
					<!-- <button class="btn btn-primary" type="submit">Post to Forum</button>
					<button class="btn btn-danger" type="submit" formaction="{% url 'delete' %}">Delete</button> -->
					<button type="button" class="post btn btn-primary" data-toggle="modal" data-target="#confirm_post">Post to Forum</button>
					<button type="button" class="delete btn btn-danger" data-toggle="modal" data-target="#confirm_delete">Delete</button>
				</div>
			</div>
			</form>
		</li>
		{% endfor %}
	</ul>
	<div class="modal fade" id="confirm_post" role="dialog">
	    <div class="modal-dialog">
	      <div class="modal-content">
	        <div class="modal-header" style="background-color: #337ab7; color: white">
	          <button type="button" class="close" data-dismiss="modal">&times;</button>
	          <h4 class="modal-title">Confirm post</h4>
	        </div>
	        <div class="modal-body">
	        	You are about to approve a post.
	        </div>
	        <div class="modal-footer">
	        	<button type="button" class="btn btn-primary _post">Post</button>
	          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        </div>
	      </div>
	      
	    </div>
	  </div>

	  <div class="modal fade" id="confirm_delete" role="dialog">
	    <div class="modal-dialog">
	      <div class="modal-content">
	        <div class="modal-header" style="background-color: #ac2925; color: white">
	          <button type="button" class="close" data-dismiss="modal">&times;</button>
	          <h4 class="modal-title">Confirm delete</h4>
	        </div>
	        <div class="modal-body">
	        	This submission will be permanently deleted.
	        </div>
	        <div class="modal-footer">
	        	<button type="button" class="btn btn-danger _delete">Delete</button>
	          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        </div>
	      </div>
	      
	    </div>
	  </div>
{% endblock %}
{% block script %}
<script type="text/javascript">
$('._post').on('click', function(){
	$('#post_form').submit()
})
$('._delete').on('click', function(){
	$("#post_form").attr("action", "{%  url 'delete' %}");
    $('#post_form').submit()
})
								// $('.post').on('click', function () {
        //                             $.confirm({
        //                                 title: 'Confirm Submission',
        //                                 content: 'You are about to submit a form.',
        //                                 buttons: {
        //                                     submit: {
        //                                         text: 'Submit',
        //                                         btnClass: 'btn-blue',
        //                                         keys: [
        //                                             'enter',
        //                                             'shift'
        //                                         ],
        //                                         action: function () {
        //                                             this.$content // reference to the content
        //                                             document.post_form.submit()
        //                                             // $.alert('Submitting...');
        //                                         }
        //                                     },
        //                                     cancel: function () {
        //                                         // $.alert('Canceled!');
        //                                     },
        //                                 }
        //                             });
        //                         });

        //                         $('.delete').on('click', function () {
        //                             $.confirm({
        //                                 title: 'Confirm Submission',
        //                                 content: 'You are about to submit a form.',
        //                                 buttons: {
        //                                     submit: {
        //                                         text: 'Submit',
        //                                         btnClass: 'btn-blue',
        //                                         keys: [
        //                                             'enter',
        //                                             'shift'
        //                                         ],
        //                                         action: function () {
        //                                             this.$content // reference to the content
        //                                             $("#post_form").attr("action", "{%  url 'delete' %}");
        //                                             document.post_form.submit()
        //                                             // $.alert('Submitting...');
        //                                         }
        //                                     },
        //                                     cancel: function () {
        //                                         // $.alert('Canceled!');
        //                                     },
        //                                 }
        //                             });
        //                         });
	</script>
	{% endblock %}
<!-- </div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</html> -->